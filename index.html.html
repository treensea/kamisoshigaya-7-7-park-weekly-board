<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>週間掲示板（単一ファイル版）</title>
  <style>
    :root{
      --bg:#0b1220;
      --card:#111a2e;
      --card2:#0f172a;
      --text:#e6edf7;
      --muted:#9fb0c7;
      --line:#1f2a44;
      --accent:#6ee7ff;
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", "Noto Sans JP", Arial;
      background: radial-gradient(1200px 800px at 20% 0%, #101c3a 0%, var(--bg) 50%);
      color:var(--text);
    }
    header{
      padding:20px 16px 10px;
      border-bottom:1px solid var(--line);
    }
    h1{ margin:0; font-size:22px; }
    .subtitle{ margin:6px 0 0; color:var(--muted); font-size:13px; }

    .nav{
      display:flex; gap:10px; align-items:center; justify-content:space-between;
      margin-top:14px;
    }
    .btn{
      border:1px solid var(--line);
      background:linear-gradient(180deg, #162449 0%, #0f1933 100%);
      color:var(--text);
      padding:10px 12px;
      border-radius:14px;
      cursor:pointer;
      user-select:none;
    }
    .btn:hover{ border-color:#2f3d63; }
    .weekLabel{
      color:var(--muted);
      font-size:13px;
      text-align:center;
      flex:1;
    }

    main{
      max-width:1100px;
      margin:0 auto;
      padding:16px;
      display:grid;
      gap:14px;
      grid-template-columns: 1.2fr 1fr;
    }
    .grid{
      display:grid;
      grid-template-columns: repeat(7, 1fr);
      gap:10px;
    }
    .dayCard{
      border:1px solid var(--line);
      background:linear-gradient(180deg, var(--card) 0%, var(--card2) 100%);
      border-radius:18px;
      padding:10px;
      min-height:120px;
      cursor:pointer;
      color:var(--text);
      text-align:left;
    }
    .dayCard:hover{ border-color:#2f3d63; }
    .dayCard.selected{
      border-color:rgba(110,231,255,.8);
      box-shadow: 0 0 0 2px rgba(110,231,255,.15);
    }
    .dayTop{
      display:flex;
      align-items:baseline;
      justify-content:space-between;
      margin-bottom:10px;
    }
    .dow{ font-weight:700; font-size:14px; }
    .dateNum{ color:var(--muted); font-size:12px; }
    .badge{
      font-size:12px;
      color:var(--muted);
      margin-bottom:10px;
    }
    .preview{
      font-size:12px;
      color:var(--text);
      opacity:.9;
      line-height:1.3;
    }

    .panel{
      border:1px solid var(--line);
      background:linear-gradient(180deg, var(--card) 0%, var(--card2) 100%);
      border-radius:18px;
      padding:14px;
      min-height:260px;
    }
    .panel h2{
      margin:0 0 12px;
      font-size:16px;
    }
    .dayList{
      display:flex;
      flex-direction:column;
      gap:10px;
    }
    .item{
      border:1px solid #223055;
      border-radius:14px;
      padding:10px;
      background: rgba(0,0,0,.12);
    }
    .itemHead{
      display:flex;
      justify-content:space-between;
      gap:10px;
      margin-bottom:6px;
    }
    .itemTitle{ font-weight:700; font-size:13px; }
    .itemTime{ color:var(--muted); font-size:12px; white-space:nowrap; }
    .itemBody{ color:var(--text); opacity:.92; font-size:13px; line-height:1.5; }
    .empty{
      color:var(--muted);
      padding:12px;
      border:1px dashed #2a3a63;
      border-radius:14px;
    }
    .hint{
      margin-top:12px;
      color:var(--muted);
      font-size:12px;
    }
    code{
      padding:2px 6px;
      border:1px solid #223055;
      border-radius:8px;
      background: rgba(0,0,0,.2);
    }

    @media (max-width: 980px){
      main{ grid-template-columns: 1fr; }
      .grid{ grid-template-columns: repeat(2, 1fr); }
    }
  </style>
</head>
<body>
  <header>
    <h1>（仮称）世田谷区上祖師谷7-7公園整備工事</h1>
    <p class="subtitle">（(株)紫水園）週間作業掲示板</p>

    <div class="nav">
      <div class="btn" id="prevWeek">◀ 前週</div>
      <div class="weekLabel" id="weekLabel"></div>
      <div class="btn" id="nextWeek">次週 ▶</div>
    </div>
  </header>

  <main>
    <section class="grid" id="weekGrid"></section>

    <section class="panel">
      <h2 id="dayTitle">お知らせ</h2>
      <div id="dayList" class="dayList"></div>
         </section>
  </main>

  <script>
    /**********************************************************************
     * ANNOUNCEMENTS（ここだけ編集すればOK）
     * 形式：
     * "YYYY-MM-DD": [
     *   { time: "09:00", title: "タイトル", body: "本文" },
     *   ...
     * ]
     **********************************************************************/
    const ANNOUNCEMENTS = {
      "2026-02-02": [
        { time: "午前", title: "朝礼", body: "集合場所：資材置場。安全確認を行います。" },
        { time: "午後", title: "資材搬入", body: "トラック入場あり。通行注意。" }
      ],
      "2026-02-03": [
        { time: "09:00", title: "朝礼", body: "集合場所：資材置場。安全確認を行います。" },
        { time: "13:00", title: "資材搬入", body: "トラック入場あり。通行注意。" }
      ],
      "2026-02-04": [
        { time: "09:00", title: "朝礼", body: "集合場所：資材置場。安全確認を行います。" },
        { time: "13:00", title: "資材搬入", body: "トラック入場あり。通行注意。" }
      ],
      "2026-02-05": [
        { time: "09:00", title: "朝礼", body: "集合場所：資材置場。安全確認を行います。" },
        { time: "13:00", title: "資材搬入", body: "トラック入場あり。通行注意。" }
      ],
      "2026-02-06": [
        { time: "09:00", title: "朝礼", body: "集合場所：資材置場。安全確認を行います。" },
        { time: "13:00", title: "資材搬入", body: "トラック入場あり。通行注意。" }
      ],
      "2026-02-07": [
        { time: "全日", title: "休工" }
      ],
      "2026-02-08": [
        { time: "全日", title: "休工" },
      ],
    };
    /**********************************************************************/

    // ---- helpers ----
    const pad2 = (n) => String(n).padStart(2, "0");
    const fmtYMD = (d) => `${d.getFullYear()}-${pad2(d.getMonth()+1)}-${pad2(d.getDate())}`;
    const fmtJP  = (d) => `${d.getFullYear()} / ${pad2(d.getMonth()+1)} / ${pad2(d.getDate())}`;

    function startOfWeek(date) {
      const d = new Date(date);
      const day = (d.getDay() + 6) % 7; // Mon=0..Sun=6
      d.setDate(d.getDate() - day);
      d.setHours(0,0,0,0);
      return d;
    }
    function addDays(date, n) {
      const d = new Date(date);
      d.setDate(d.getDate() + n);
      return d;
    }

    const getItems = (dateStr) => Array.isArray(ANNOUNCEMENTS[dateStr]) ? ANNOUNCEMENTS[dateStr] : [];

    // ---- state ----
    let currentWeekStart = startOfWeek(new Date());
    let selectedDate = fmtYMD(new Date());

    const weekGrid = document.getElementById("weekGrid");
    const weekLabel = document.getElementById("weekLabel");
    const dayTitle = document.getElementById("dayTitle");
    const dayList = document.getElementById("dayList");
    const dowJP = ["月","火","水","木","金","土","日"];

    function renderWeek() {
      weekGrid.innerHTML = "";

      const start = currentWeekStart;
      const end = addDays(start, 6);
      weekLabel.textContent = `${fmtJP(start)} ～ ${fmtJP(end)}`;

      for (let i = 0; i < 7; i++) {
        const d = addDays(start, i);
        const dateStr = fmtYMD(d);
        const items = getItems(dateStr);

        const card = document.createElement("button");
        card.className = "dayCard" + (dateStr === selectedDate ? " selected" : "");
        card.onclick = () => {
          selectedDate = dateStr;
          renderWeek();
          renderDay();
        };

        const top = document.createElement("div");
        top.className = "dayTop";

        const dow = document.createElement("div");
        dow.className = "dow";
        dow.textContent = dowJP[i];

        const num = document.createElement("div");
        num.className = "dateNum";
        num.textContent = `${pad2(d.getMonth()+1)}/${pad2(d.getDate())}`;

        top.appendChild(dow);
        top.appendChild(num);

        const badge = document.createElement("div");
        badge.className = "badge";
        badge.textContent = items.length ? `公告 ${items.length}` : "—";

        const preview = document.createElement("div");
        preview.className = "preview";
        preview.textContent = items.length ? items[0].title : "（なし）";

        card.appendChild(top);
        card.appendChild(badge);
        card.appendChild(preview);

        weekGrid.appendChild(card);
      }
    }

    function renderDay() {
      const d = new Date(selectedDate);
      const items = getItems(selectedDate);

      dayTitle.textContent = `お知らせ：${fmtJP(d)}（${dowJP[(d.getDay()+6)%7]}）`;
      dayList.innerHTML = "";

      if (!items.length) {
        const empty = document.createElement("div");
        empty.className = "empty";
        empty.textContent = "この日の公告はありません。";
        dayList.appendChild(empty);
        return;
      }

      for (const item of items) {
        const row = document.createElement("div");
        row.className = "item";

        const head = document.createElement("div");
        head.className = "itemHead";

        const title = document.createElement("div");
        title.className = "itemTitle";
        title.textContent = item.title || "（無題）";

        const time = document.createElement("div");
        time.className = "itemTime";
        time.textContent = item.time ? item.time : "";

        head.appendChild(title);
        head.appendChild(time);

        const body = document.createElement("div");
        body.className = "itemBody";
        body.textContent = item.body || "";

        row.appendChild(head);
        row.appendChild(body);

        dayList.appendChild(row);
      }
    }

    document.getElementById("prevWeek").onclick = () => {
      currentWeekStart = addDays(currentWeekStart, -7);
      renderWeek();
      renderDay();
    };

    document.getElementById("nextWeek").onclick = () => {
      currentWeekStart = addDays(currentWeekStart, +7);
      renderWeek();
      renderDay();
    };

    // init
    renderWeek();
    renderDay();
  </script>
</body>
</html>
